# 1. 프로토콜
## (1) 개요
1. 시스템 간에 통신하기 위한 규약
2. 프로토콜은 구문, 의미, 타이밍으로 이루어져 있다.

## (2) 프로토콜의 구성요소
1. 구문 : 송수신 데이터 포맷을 의미한다.
2. 의미 : 데이터의 각 항목이 가지는 의미를 의미한다.
3. 타이밍 : 데이터 송수신 동작 방식을 정의하는 것을 의미한다.

# 2. OSI 7 Layer
## (1) 개요
1. 국제 표준화 기구(ISO)에서 제정한 개방형 시스템 간의 상호연결(OSI: Open System Interconnection) 모델
2. 분산된, 이기종 시스템 간의 네트워크 상호호환을 위해 필요한 표준 아키텍처를 정의한 참조모델
3. 기능에 따라 계층적으로 표준화 되어 있다. 어떤 목적을 수행하기 위해서 하나의 큰 프로토콜을 설계하는 것이 아니라 계층적으로 나누어진 여러 프로토콜을 조합하여 그 목적을 수행하는 방식이다. 이러한 접근 방식을 "분할 정복"이라 한다.
4. 계층별로 표준화를 함으로써 상하위 계층 간에 인터페이스만 충족시켜주면 다양한 제조자들에 의한 독자적인 계층별 프로토콜의 구현 및 발전을 이룰 수 있다.

## (2) 계층별 특징
### 1) Pysical Layer (물리 계층, L1)
#### (가) 개요
1. 물리적 장치의 전기적, 전자적 연결에 대한 명세
2. 디지털 데이터를 전기적인, 광학적인 신호로 변환하여 입출력을 담당하는 계층으로 1계층에는 주소 정보가 없다. 따라서 목적지를 인식할 수 없고 전기적인 신호만을 연결된 모든 노드에 전달한다.
3. 물리 계층의 데이터 단위를 **비트**라 한다.

#### (나) 주요 네트워크 장비
1. HUB(허브) : 들어온 신호를 연결된 모든 포트로 전달하는 중계 장치이다. 이러한 허브를 Dummy Hub라고 한다.(2계층 장비는 Switching Hub로 구별)
    * Switching Hub : Dummy Hub는 연결된 모든 노드에게 신호를 전달하는 반면에 Switching Hub는 목적지 주소(2계층 장비이므로 MAC 주소를 의미)를 식별하여 해당 목적지 노드가 연결된 포트로만 신호를 전달하는 장비를 말합니다.
2. REPEATER(리피터) : 감쇠된 전송신호를 새롭게 재생하여 다시 전달하는 재생 중계 장치이다.

#### (다) 허브(Dummy Hub) 환경에서의 스니핑(Sniffing)
1. 더미 허브는 전달받은 패킷을 단순히 연결된 모든 노드로 전송하기 때문에 허브에 연결되어있는 모든 노드는 스니퍼를 통한 스니핑이 용이하다. 단, 네트워크 카드의 기본동작모드가 자신을 목적지 주소로 하는 패킷이 아니면 모두 폐기하기 때문에 패킷을 볼 수 있는 것은 아니다.
2. 네트워크 카드(NIC)의 동작모드를 **무차별 모드(Promiscuous Mode)**로 설정하면 자신이 목적지가 아닌 패킷도 모두 수신하기 때문에 더미 허브 환경에서 손쉽게 스니핑할 수 있다. 일반적으로 스니퍼가 동작할 때 네트워크 카드의 동작모드를 무차별 모드로 설정한다.

### 2) Data Link (데이터 링크 계층, L2)
#### (가) 개요
1. Node-To-Node Delivery, 인접한 노드 간의 신뢰성 있는 프레임 전송을 담당하는 계층이다. 데이터링크 계층은 인접노드 간의 통신이며 최종 목적지 노드에 도달하기 위해서는 각각의 노드 간에 프레임에 대한 주소설정(MAC 주소)이 이루어진다.
2. 목적지 노드를 찾아가기 위해서는 목적지 노드에 대한 물리적인 주소가 필요하며 네트워크 카드(NIC)의 MAC 주소가 해당 역할을 한다.
3. IEEE 802 표준에서는 LAN 상의 데이터링크 계층을 LLC(Logical Link Control) 와 MAC(Media Access Control) 두 개의 하위 계층으로 세분화한다.
    * LLC (Logical Link Control) : 네트워크 계층과의 연결을 담당하는 계층으로 상위 계층으로 안전하고 정상적인 데이터를 전달하기 위해 데이터 오류 검출 및 상위 프로토콜에 대한 타입 확인
    * MAC (Media Accesss Control) : 물리적 계층과의 연결을 담당한느 계층으로 신호변환을 통해 물리적 계층과 연결하고 MAC 주소를 통해 주소를 확인하여 정상적으로 데이터가 송수신되고 있는지 확인
4. 데이터링크 계층의 데이터 단위를 **프레임**이라 한다.
5. 데이터링크 계층의 대표적 프로토콜로 Eternet, TokenRing, FDDI, X.25, Frame Relay 등이 있다.

#### (나) 신뢰성 있는 전송을 위한 기능
1. 신뢰성 있는 전송이란 데이터의 안전한 전송을 보장해준다는 의미로 이러한 기능들을 일반적으로 데이터링크 컨트롤이라 한다.
2. **흐름제어 (Flow Contorl)** : 송신 노드가 수신 노드의 처리 속도를 고려하여 이를 초과하지 않도록 전송을 제어한다. 이러한 흐름제어는 수신 노드가 수신확인응답을 송신 노드에 제공함으로써 흐름제어를 수행하는데 다음 2가지 방식이 있다.
    * **정지-대기 (Stop and Wait)** : 송신 측에서 프레임을 전송한 후 확인응답(ACK)을 받을 때까지 대기하는 방식
    * **슬라이딩 윈도우 (Sliding Window)** : 송신 측에서 수신 측의 수신확인응답을 받기 전에 수신 가능한 범위 내에서 여러 프레임을 전송하는 방식
3. **오류제어 (Error Control)** : 전송 중에 여러 가지 원인(주파수 혼란, 감쇠, 잡음 등)에 의한 오류나 손실 발생 시 이를 해결하기 위한 제어방식이다. 오류제어 방식에는 다음 2가지 방식이 있다.
    * **후진 오류 수정방식 (BEC, Backward Error Correction)** : 송신 측에서 데이터전송 시 오류를 검출할 수 있는 부가 정보를 함께 전송하여 수신 측에서 이를 점검하여 오류 발생 시 재전송을 요청하는 방식으로 이러한 요청을 ARQ(Automatic Repeate Request)라 한다.
    * **전진 오류 수정방식 (FEC, Forward Error Correction)** : 재전송이 불필요한 방식으로 송신 측에서 데이터 송신 시에 오류의 검출 및 수정까지 가능한 부가 정보를 담아서 보내는 방식
4. **회선제어 (Line Control)** : 점-대-점(Point-to-Point) 또는 다중점 회선 구성 방식 과 단방향, 반이중 및 전이중 등의 전송 방식에 따라 사용되는 전송링크에 대한 제어 규범이다.

#### (다) 주요 네트워크 장비
1. L2 Switch
    * 스위치 장비는 내부적으로 MAC Address Table을 가지고 있다. 이 테이블에는 스위치 포트에 연결된 노드의 MAC 정보를 담고 있다. 이 정보를 참조하여 목적지 MAC 주소의 포트에 연결된 노드에게만 패킷을 전송한다.
    * 스위치 환경에서 특정 포트를 모니터링하고자 한다면 모니터링 포트 또는 네트워크 트래픽을 모니터링할 수 있는 탭 장비를 통해 패킷을 복제해서 트래픽 분석 장비로 전달한다.
    * 스위치 환경에서는 기본적으로 목적지로만 패킷을 전송하기 때문에 스니핑이 불가능하다. 이러한 환경에서 스니핑을 하기 위해서는 스위치 재밍, ARP 스푸핑, ARP 리다이렉트, ICMP 리다이렉트, 스위치의 SPAN/Monitoring Port 이용 등이 있다.
2. Bridge
    * 물리적으로 떨어진 동일한 LAN을 연결해주는 장비

#### (라) 스위치 환경에서의 스니핑 공격 기법
1. 스위치 재밍(Switch Jamming)/MAC Flooding 공격

2. 
