
### 허브 
* 한 포트에서 수신한 신호를 모든 포트로 전달할 뿐 트래픽을 조작하거나 검사하지 않는다.

### 브로드캐스트 주소 구하는 방법
* MAC은 ```FF:FF:FF:FF:FF:FF```
* IP는 예를 들어 161.134.4.0/22 의 브로드캐스트 주소를 구하면
  1) 서브넷 마스크 11111111 11111111 11111100 00000000 2진수를 구한다
  2) 호스트 주소 00000000 00000000 00000011 11111111 2진수를 구한다.
  3) 161.134.4.0 OR 호스트 주소를 한다.
  4) 161.134.7.255 가 브로드캐스트 주소이다.
 
### 데이터 링크 계층 2계층
* 데이터 링크 계층은 두 개의 서브 계층으로 구분한다. 하위 MAC(Media Access Control) 계층과 상위 LLC(Logical Link Control) 계층이 위치한다.
  * 하위 MAC 계층 : 장비 간 공유 매체에 대한 다중 접근 제어를 담당(CSMA/CD)
  * 하위 LLC 계층 : 장비 간 논리적 연결을 수립하고 제어하는 역할 담당(회선제어, 흐름제어, 오류제어 등)
* 단위는 프레임을 사용하고, 대표적인 장비로 스위치, 브릿지 등이 있으며 보안 프로토콜로 PPTP, L2F, L2TP 등이 있다.
* MAC 주소는 48bit, 6byte로 이루어지며, IP주소를 ARP 프로토콜을 사용하면 MAC 주소를 알 수 있다.
* **PPTP (Point to Point Tunnel Protocol)**
  * MS사에서 개발한 프로토콜
  * 하나의 터널에 하나의 연결만을 지원하여 일대일 통신만 가능하다.
* **L2F (Layer 2 Forwarding)**
  * 시스코사에서 개발한 프로토콜
  * 하나의 터널에 여러 개의 연결을 지원하여 다자간 통신이 가능하다.
* **L2TP (Layer 2 Tunneling Protocol)**
  * MS사와 시스코사에서 개발한 프로토콜
  * L2F에 기반을 두고 PPTP와의 호환성을 고려하여 만들어진 터널링 프로토콜   
* 스위치, 허브는 단일 Network 구간에서 사용된다.

### 스위치(L2-Switch)
* 한 포트에서 수신한 신호를 목적지 포트로만 전달한다. 확장 제한이 없으며, 이중화시 **스패닝 트리 프로토콜**을 이용하여 무한 루핑을 방지할 수 있다.
  1. Store-and-Firward 방식 : 수신된 전체 프레임을 버퍼에 저장하고 CRC 등의 오류 검사 수행 후 목적지 전송
  2. Fragment-Free 방식 : 수신된 프레임의 첫 64byte를 버퍼에 저장하고 충돌 등의 오류 검사 수행 후 목적지 전송
  3. Cut-Throuth 방식 : 수신된 프레임의 첫 6byte를 읽어 도착 MAC 주소를 검사 수행 후 목적지 전송

### 포트 미러링
* 스위치 환경에서 모니터링과 트래픽 분석을 위해 특정 포트로 전달되는 패킷 또는 VLAN의 모든 패킷을 다른 모니터링 포트로 복제하여 전달

### 네트워크 계층 3계층
* 송신 측으로부터 수신 측까지 데이터를 안전하게 전달하기 위해 논리적 링크를 설정하고 상위 계층 데이터를 작은 크기의 패킷으로 분할하여 전송하는 역할
* 단위로 패킷을 사용하고, 경로 설정에 사용할 논리적 주소를 제공하며 대표적인 장비로는 라우터가 있고 대표적인 보안 프로토콜로 IPsec이 있다.
* **IPSEC**
  * 터널링 : 송신자와 수신자 사이의 전송로에 외부로부터의 침입을 막기 위한 일종의 파이프를 구성하는 기술
  * IKE : IPsec의 보안연관(SA) 생성을 위한 협상에 사용되는 키 교환 프로토콜로 500/udp 포트를 사용한다.
  * 전송모드 : 종단 호스트 사이에서 터널이 생성되는 것으로 IP 헤더를 제외한 부분에 대해서 보안 서비스를 제공하고 트래픽 흐름 분석에 취약할 수 있다.
  * 터널모드 : 터널 게이트웨이 사이에서 터널이 생성되는 것으로 IP 헤더를 포함한 패킷 전체에 대해서 보호 서비스를 제공한다.
  * 보안 서비스 제공 6가지
    * 기밀성 : 전달된 메시지가 도중에 도청되어도 그 내용을 알 수 없음을 보장해준다.
    * 비연결형 무결성 : 전달된 메시지가 도중에 위변조되지 않았음을 보장해준다.
    * 데이터 원천 인증 : 전달된 메시지가 올바른 발신지로부터 온 메시지임을 보장해준다.
    * 재전송 공격 방지 : 전달도 메시지가 재전송된 것이 아니고 현재 발신지로부터 송신된 실제 메시지임을 보장해준다.
    * 접근제어 : 중요한 정보 및 시스템에 대하여 접근권한을 달리 부여하여 제어해준다.
    * 제한적 트래픽 흐름의 기밀성 : 제한적으로 네트워크상 트래픽 흐름에 대한 정보의 기밀성을 보장해준다. 
  * **AH (Authentication Header)**
    * 메시지 인증 코드(MAC)를 이용하여 '비연결성 무결성'과 '데이터 원천 인증' 서비스를 제공하고, 기밀성 서비스 제공하지 않는다.
    * 순서번호를 통해 재전송 공격 방지한다.
    * 51번 포트를 사용한다.
  * **ESP (Encapsulating Security Payload)
    * 메시지 인증 코드(MAC)를 이용하여 '비연결성 무결성' 과 '데이터 원천 인증' 서비스를 제공하고, 대칭키 암호화를 통해 기밀성 서비스 제공한다.
    * 순서번호를 통해 재전송 공격 방지한다.
    * 50번 포트를 사용한다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
### 라우터
* 가장 핵심적인 기능은 패킷의 경로를 결정하는 것과 결정된 경로에 따라 패킷을 전송하는 기능이다.
* VLAN 간에 통신을 가능하게 하고, 기본적인 보안 기능과 QoS 관련 기능 지원

### 전송 계층 4계층
* 종단 노드 간의 신뢰성 있는 데이터 전송을 담당한다.
* 단위로 세그먼트를 사용하고, 대표적인 보안 프로토콜로 SSL/TLS가 있다.
* DTLS (Datagram Transmission Layer Secuirity) 프로토콜 : 데이터그램 기반 으용 프로그램의 통신 과정에서 도청, 변조 또는 메시지 위조를 방지하기 위해 고안된 보안프로토콜


### 표현 계층 (Presentation Layer) 6계층 / TCP/IP 계층에서는 4계층 응용 계층
* 송수신 자가 데이터를 이해할 수 있도록 표현방식의 변환을 담당하는 계층이다.
* 데이터 압축/압축해제, 암호화/복호화, 인코딩/디코딩 등을 담당

### OSI 7계층 PDU (Protocol Data Unit)
1. 응용프로그램 계층
2. 표현 계층
3. 세션 계층        - 응용까지 데이터
4. 전송 계층        - 세그먼트
5. 네트워크 계층    - 패킷
6. 데이터 링크 계층 - 프레임
7. 물리 계층        - 비트

### 1. VLAN
* **데이터링크 계층에서 브로드캐스트 도메인을 나누기 위해 사용하는 기술**로 물리적인 네트워크 구조의 변경 없이 스위치에서 제공하는 기능을 통해 **논리적으로 서브넷을 구성**할 수 있다.
* VLAN을 통해 가상의 브로드캐스트 도메인을 생성함으로써 **브로드캐스트 트래픽을 제한하여 전체 네트워크 서비스의 성능향상**을 기대할 수 있다.
* 서로 다른 VLAN에 대해 **서로 다른 보안 정책(네트워크 자원 접근 제한)을 적용할 수 있으므로 보안성**을 높일 수 있다.
* 예를 들어, 인사 부서가 강화된 보안을 요구한다면 관리자는 정책을 개발하고 모든 인사 부서 사용자들을 특정 VLAN에 추가하고 강화된 보안 정책을 인사 부서 VLAN에만 적용할 수 있다.

### 2. VLAN 종류
1. **Port 기반 VLAN** : 스위치 포트를 각 VLAN에 할당하는 것으로 같은 VLAN에 속한 포트에 연결된 호스트들 간에만 통신이 가능한 VLAN이다. 이러한 VLAN이 가장 일반적이고 많이 사용되는 구성이다.
2. **MAC 기반 VLAN** : 호스트들의 MAC 주소를 VLAN에 등록하여 같은 VLAN에 속한 MAC 주소의 호스트들 간에만 통신이 가능한 VLAN이다. 이 VLAN은 호스트들의 MAC 주소를 전부 등록하고 관리해야 하는 어려움이 있다.
3. **네트워크 주소 기반 VLAN** : 네트워크 주소별로 VLAN을 구성하여 같은 네트워크에 속한 호스트들 간에만 통신할 수 있도록 구성한 VLAN이다. 주로 IP 네트워크 VLAN을 사용한다.
4. **프로토콜 기반 VLAN** : 같은 통신 프로토콜(TCP/IP, IPX/SPX, Netview 등)을 가진 호스트들 간에만 통신할 수 있도록 구성한 VLAN이다.


### ARP 프로토콜
* 로컬 네트워크의 모든 호스트에게 대상 IP를 가진 호스트의 MAC 주소를 질의하는 요청 메시지를 만들어 브로드캐스트로 요청하고 대상 IP가 설정된 호스트는 자신의 MAC 주소를 담은 응답 메시지를 만들어 요청한 호스트에게 유니캐스트로 응답한다.
* 따라서 요청 메시지를 전송할 때는 이더넷 프레임의 목적지 MAC 주소 필드에 브로드캐스트 주소인 ```FF:FF:FF:FF:FF:FF```가 설정된다.
* **ARP 스푸핑** : MAC 주소를 속이는 공격으로 로컬에서 통신하고 있는 서버와 클라이언트의 IP 주소에 대한 2계층 MAC 주소를 공격자의 MAC 주소로 속임으로써 클라이언트에서 서버로 가는 패킷의 흐름을 왜곡시킨다.
* **스위치 재밍** : 스위치는 맥 주소 테이블이 꽉차면 네트워크 패킷 브로드캐스트를 한다. 이러한 특징을 이용해 임의의 ARP 패킷의 MAC 주소가 스위치의 MAC 주소 테이블을 오버플로우 시켜 특정 수신자에게 가야할 패킷을 브로드캐스트 시켜 공격자는 패킷을 스니핑 할 수 있다.

### ICMP (Internet Control Message Porotol) 프로토콜
* IP 프로토콜의 비 신뢰적인 특성을 보완하기 위해 프로토콜로 IP 패킷 전송 중 에러 발생 시 에러 발생 원인을 알려주거나 네트워크 상태를 진단해주는 기능을 제공해준다.
* ech, timestamp, redirects 등 다양한 작업의 Type 메시지 제공
* ICMP Redirect 메시지는 일반적으로 라우터가 보내는 패킷으로 이를 수신한 호스트 또는 라우터는 자신의 라우팅 테이블에 특정 목적지로 나가는 Gateway 주소를 변경한다. 보안상의 이유로 대부분의 OS에서는 IMCP Redirect 옵션 해제

### IGMP (Internet Group Management Protocol) 프로토콜
* 멀티캐스트를 지원하는 라우터가 멀티캐스트 그룹에 가입한 네트워크 내의 호스트를 관리하기 위해 사용하는 프로토콜이다.
* IGMP는 ICMP와 마찬가지로 IP 상위 계층에 존재하며 IP 패킷으로 캡슐화되어 전송된다.

### IP 단편화 
* ```flag id:size@offset[+] 단편ID:IP 헤더를 제외한 단편 크기(byte)@단편의 상대위치이고 추가 단편이 있음(+)을 의미한다.```
* 예를 들어 MTU가 1500바이트로 설정된 Ethernet을 통해 4,000 바이트의 ping 패킷을 보내려고 한다. 실제 크기는 20byte를 뺀 1480 바이트가 크기가 된다.

### IPv6
* **듀얼스택** : IPv4와 IPv6 프로토콜을 동시에 설정하여 통신 상태에 따라 선택적으로 사용할 수 있도록 하는 방식
* **터널링** : IPv4 네트워크를 경유하여 IPv6 네트워크 간 통신을 위한 방식으로 IPv4 네트워크를 통과하는 가상의 경로(터널)를 만들어 통신하는 방식
* **주소/헤더 변환** : 변환 헤더를 추가하여 IPv4 -> IPv6, IPv6 -> IPv4

### 소켓
* 호스트/프로세스 간에 통신을 위한 소프트웨어 모듈을 의미한다.
* 특정 IP 주소와 포트 번호의 조합으로서 같은 IP의 동일한 시스템이 동시에 특정 클라이언트의 복수 개의 응용 프로그램에 정확하게 통신할 수 있게 해준다.

### 포트
* 상위 애플리케이션/서비스/소켓을 식별하기 위한 식별자로 IANA 기구를 통해 관리되고 있다.
  1. well-known port(0~1023)
     |프로토콜|포트번호|설명|
     |:-:|:-:|:-|
     |FTP, Data|20|파일 전송 프로토콜의 데이터채널|
     |FTP, Control|21|파일 전송 프로토콜의 제어채널|
     |TELNET|23|터미널 네트워크|
     |SMTP|25|간단한 메일 전송 프로토콜|
     |DNS|53|도메인 네임 시스템|
     |BOOTP|67|부트스트랩 프로토콜|
     |HTTP|80|하이퍼텍스트 전송 프로토콜|
  2. Regstered Port(1024~49151)
      * 제조사가 IANA에 용도를 등록해서 사용하는 포트로 일반 사용자가 서버 프로세스를 실행하기 위해 사용하는 포트이다.
  3. Dynamic Port(49152~65535)
      * 서버/클라이언트 환경에서 클라이언트 접속 시 사용하는 임시 포트

### 세션 하이재킹
* 공격자가 인증이 완료된 정상적인 사용자 세션을 중간에 가로채서 별도의 인증작업 없이 정상적인 사용자로 위장하여 가로챈 세션으로 통신하는 행위이다.
  * **TCP 세션 하이재킹** : TCP의 세션 관리 정보(출발지 IP/Port, Sequence Number 등)를 위조하여 TCP 세션을 가로채는 행위
    * TCP 세션 하이재킹은 케빈 미트닉이 시모무라 쓰토무의 컴퓨터 시스템을 공격할 때 사용했던 공격 방식으로 TCP 사용자 정보(IP/Port, Sequence Number)로 위조하여 IP 스푸핑으로 세션 취 
  * **HTTP 세션 하이재킹** : 사용자의 HTTP 세션 ID를 탈취하여 정상 사용자로 위장하여 서버에 접근하는 공격

### netbios (Network Basic Input/Output System) 
* IBM PC를 위한 네트워크 인터페이스 체계로 네임, 세션, 데이터그램의 세 가지 서비스를 제공하고 있다.
* 차단하려면 tcp/udp 135~139 포트 차단

### SMB (Server Message Block)
* 윈도우 운영체제 환경에서 사용되는 파일, 프린터, 직렬 포트 등에 대한 공유 프로토콜로 유닉스/리눅스 운영체제에서는 삼바 소프트웨어를 설치하면 SMB를 이용한 유닉스/리눅스와 윈도우 컴퓨터 간 공유가 가능하다.
* 초기 SMB는 NetBios API에서 동작했으며 TCP 139번 포트를 사용
* 윈도우 2000 이후 SMB 기능을 확장하여 **CIFS(Common Internt FIle System)라는 이름으로 변경, TCP 445번 포트 사용
* 여러 보안 취약점으로 인해 컨피커 웜 바이러스, 워너크라이 랜섬웨어, 워너마인 암호화폐 채굴 악성코드 등에 악용
* tcp 445 포트 차단

### PING
* ICMP Echo Request 메시지를 특정 호스트에 송신하여, 이에 대한 ICMP Echo reply를 수신함으로써 호스트의 활성화 여부를 검사하고 요청과 응답에 대한 경과 시간 RTT(Round Trip Time)를 알아볼 때 사용한다.

### netstat
* 시스템의 네트워크 관련 다양한 상태정보를 확인할 수 있는 유닉스/리눅스/윈도우 시스템의 내장 명령어이다. 네트워크 인터페이스에 대한 정보, 라우팅 테이블 정보, 소켓 상태정보, 프로토콜별 통계 정보 등 지정 옵션에 따라서 다양한 네트워크 관려 정보 제공
* 현재 시스템과 통신하고 있는 네트워크 상태 출력
* -a : 모든 상태의 소켓 정보 출력
* -n : 네트워크 주소(IP, Port)를 숫자 형식으로 출력
* -t 또는 -u 옵션 : TCP, UDP 소켓 정보만 출력
* -p 옵션 : 해당 소켓의 PID/프로세스명 정보 출력

### tracerout
* 종단 노드 사이에 있는 여러 중계 노드(L3장비/라우터) 각 구간에 대한 네트워크 상태를 관리하기 위한 명령어로 최종 목적지 노드에 도달하는데 경유하는 중계 노드(라우터)의 개수, IP 주소, 응답시간 등을 파악할 수 있다.
* 최초 IP 패킷의 TTL 필드값이 1인 UDP 패킷은 첫 번째 라우터에서 TTL이 감소하여 0으로 되고 해당 패킷이 폐기되었음을 알리는 ICMP Time Exceeded 메시지가 최초 출발지로 전송된다. 두 번째 TTL 필드값이 2인 .....

### 포트 스캐닝
* 공격자가 침입 전 대상 시스템에 어떤 포트(서비스)가 열려있는지 확인하는 작업으로 대상 서버의 동작 여부와 제공하는 서비스 등을 확인할 수 있다.
* SYN Connect 스캔 (nmap -sT) : SYN 보냄. 포트가 닫혔을 때 RST/ACK 응답, 포트가 열린 경우 SYN/ACK 응답
* Decoy Scan(유인 스캔) : 스캔을 당하는 타겟 호스트에서 스캐너 주소를 식별하기 어렵게 하려고 실제 스캐너 주소 외에도 다양한 위조된 주소로 스캐하는 방식
* FIN SCAN (nmap -sF) : FIN 보냄. 포트가 열을 때 응답 X, 포트가 닫힌 경우 RST/ACK 응답
* XMAS SCAN (nmap -sX) : ACK, FIN, RST, SYN, URG 보냄. 포트가 열렸을 때 응답 X, 포트가 닫힌 경우 RST/ACK 응답
* NULL SCAN (nmap -sN) : NULL 보냄. 포트가 열렸을 떄 응답 X, 포트가 닫힌 경우 RST/ACK 응답
* TCP Half SCAN (nmap -sS) : SYN 보냄. 포트가 열렸을 떄 SYN/ACK 패킷이 오면 수신하고 즉시 RST 패킷 보내어 연결 종료, 포트가 닫힌 경우 RST/ACK 응답

### 스니핑
* 랜카드를 무차별 모드(Promiscuous Mode)로 설정한 후 연결된 회신에 흐르는 모든 IP 패킷을 가로채는 공격을 말한다.
* 대표적으로 **스위치 재밍**, **SPAN 포트 태핑 등이 있다.

### 스푸핑
* 포트 주소, IP 주소, MAC 주소 등을 조작하여 네트워크 트래픽 흐름을 왜곡하고 시스템 권한 탈취 등의 행위를 수행하는 공격을 말한다.
* **ARP Spoofing**, **IP Spoofing**, **DNS SPoofing** 공격이 있다.

### 스누핑 
* 네트워크 트래픽상의 정보를 획득하는 공격 행위를 말한다.

### 도스/디도스
* 네트워크 대역을 고갈시키는 등의 공격을 말한다. 대표적으로 TCP SYN Flooding, HTTP Flooding, HTTP CC 등의 공격기법이 있다. 해당 공격이 발생하면 공격 대상 사이트의 서비스 가용성에 심각한 영향을 미친다.

### LAND Attack
* 출발지 IP와 목적지 IP가 동일한 공격이다.

### Fragment Overlap
* 공격자는 공격용 IP 패킷을 위해 두 개의 단편(Fragment)을 생성한다. 첫 번째 단편에서는 패킷 필터링 장비에서 허용하는 HTTP와 같은 포트 번호를 설정한다. 그리고 두 번째 포트 단편에서는 offset을 조작해서 재조합될 때 첫 번째 단편의 일부분을 덮어쓰여 공격자가 원하는 포트로 연결이 된다.

### Tiny Fragment
* 패킷 필터링 장비나 IDS는 필터링을 결정하기 위해 포트 번호를 확인하는데, 포트 번호가 포함되지 않을 정도로 아주 작게(Tiny) 쪼개진 첫 번째 단편을 그냥 통과시킨다. 실제 포트 번호가 포함된 두 번째 단편은 첫 번째 단편이 허용되었으므로 통과하여 공격자가 원하는 포트로 연결이 된다.

### Teardrop
* 공격자가 헤더가 조작된 일련의 IP 패킷 조각들을 전송함으로써 패킷을 재조합하는 과정에서 부하가 걸리게 하는 공격 방법이다.

### Ping Of Death
* 아주 크게 만든 ICMP 패킷을 전송함으로써 공격 네트워크에 도달하는 동안 아주 작은 조각이 되어 공격 대상 시스템이 조각화된 패킷을 모두 처리해야 함으로써 성능을 떨어뜨리는 공격이다.

### Smurf 
* 출발지 IP 주소를 공격대상의 IP 주소로 위조한 ICMP Echo Request 를 브로드캐스트하여 다수의 ICMP Echo Reply 패킷을 공격대상에게 전달되어 서비스 거부 상태 유발 공격
* **대응방법** : 자신의 네트워크로 들어오는 Directed Broadcast 패킷을 막도록 라우터 설정, IP Broadcast Address로 온 ICMP Request 패킷 응답 X

## DDoS 공격
### 트리누 (Trinoo)
* 미네소타 대학, 솔라리스 2.x에서 최초 발견
* UDP Flooding DDoS 공격을 유발하는 데 사용되었으며 Attacker, Master, Zombie로 공격 네트워크를 구성
* rpc.statd, rpc.cmds, rpc.ttdserverd 데몬의 취약점을 이용
* 접속 포트
  * Attack -> Master : 27665/tcp
  * Master -> Zombie : 27444/udp
  * Zombie -> Master : 31335/udp
  * Zombie -> Victim : udp 공격
#### Trino 공격 실습
* Master 데몬을 통한 공격
  1. telnet을 통한 Master 데몬 접속(27665/udp)
     * 원격 접속 시 패스워드 사용(password : betaalmostdone)
  2. bcast 명령 : Zombie PC 리스트 확인
  3. doc 공격 대상 IP 명령 : 공격 대상 IP로 공격 개시(192.168.8.11)
     * dos 192.168.8.11
  4. mdie killme : 공격 중지
   
### TFN (Tribe Flood Network)
* Trinoo처럼 rpc.statd, rpc.cmds, rpc.ttdserverd 데몬의 취약점을 이용
* Attacker가 Master에 명령 시 패스워드를 쓰지 않고 ICMP echo request 패킷에 명령어를 전송
* TCP, UDP, ICMP 등을 복합적으로 사용하여 TCP Syn Flooding, UDP Flooding, ICMP Flooding, Smurf 공격 수행

### Stacheldracht
* Trinoo와 TFN의 발전된 형태로 TCP Syn Flooding, UDP Flooding, ICMP Flooding, Smurf 공격 등을 수행
* Master에 새로운 Agent가 자동으로 갱신되는 특징이 있다.
* 접속 포트
  * Attack -> Master : 16660/tcp
  * Master -> Zombie : 65000/tcp
  * Zombie -> Master : ICMP Echo Reply
  * Zombie -> Victim : TCP Syn, UDP Flooding, ICMP Flooding, Smurf

### TFN2K
* TFN의 발전된 형태로 통신에 특정 포트가 사용되지 않고 암호화되어 있음
* TCP, UDP, ICMP 등을 복합적으로 사용하여 TCP Syn Flooding, UDP Flooding, ICMP Flooding, Smurf 공격 등을 수행
* UDP 패킷의 헤더는 정상적인 UDP 패킷보다 3byte 크고 TCP 패킷의 헤더 길이는 항상 0이다.

### P2P 봇넷
* 분산형 명령/제어 방식
* 참여 멤버(좀비/봇) 모두 C&C 역할을 하므로 별도의 도메인과 C&C 서버가 불필요하다.
* 대표적인 봇넷으로 Strom, Peacomm 등이 있다.

### DGA (Domain Generation Algorithm) 기법
* 새로운 C&C서버 도메인을 동적으로 다수 생성해 C&C 서버가 노출되는 것을 숨기는 기법으로 도메인 기반으로 탐지하는 보안장비를 우회하기 위한 목적
* 약속된 규칙 도메인명을 생성하기 때문에 C&C 서버를 운영하는 공격자는 해당 규칙에 따라 생성될 수 있는 도메인명 중 하나를 DNS 서버에 새롭게 등록하는 방식으로 운영

### HTTP Get Flooding
* 공격자가 동일한 동적 컨텐츠(/index.php)에 대한 HTTP GET 요청을 대량으로 발생시켜 공격 대상 웹서버가 해당 요청을 처리하기 위해 서버 자원을 과도하게 사용하도록 하여 정상적인 요청을 처리하지 못하도록 하는 서비스 거부 공격이다.

### Slow HTTP Header Dos 
* HTTP 프로토콜을 이용한 서비스 거부 공격으로 정상적인 HTTP 패킷의 헤더는 Carriage Return & Line Feed(개행문자)가 두 번 나타나지만, 해당 공격이 발생하면 헤더의 마지막에 개행문자를 하나만 전송하여 웹서버와의 다수 연결 상태를 장시간 지속시킴으로써 웹서버의 자원을 잠식하게 되는 공격

### TCP SYN Flooding
* 정상적인 TCP 연결이라면 클라이언트로부터 SYN+ACK에 대한 ACK 응답을 받아 연결 설정이 완료되지만 'TCP SYN Flooding 공격'의 경우 공격자가 출발지 IP를 위조하여 다수의 요청을 발생시키고 위조된 출발지 주소이기 떄문에 SYN+ACK에 대한 정상 ACK 응답이 발생하지 않는다.
* 공격 대상 서버의 제한된 **Backlog Queue(연결요청대기큐)** 를 모두 소진시키는 형태의 공격이다.
* 따라서 netstat -an 명령을 수행하여 서버 측에서 다수의 SYN_RECV의 연결 설정 중인 소켓을 확인할 수 있다.

### ngrep 
* tcpdump/wirewhark 와 같이 패킷을 캡처하고 분석할 수 있는 도구이다. 일반적으로 Ascii 형식으로 패킷의 데이터를 보고자 할 때 유용하게 사용할 수 있다.
* -I : pcap 파일을 read
* -t : 타임스탬프를 출력
* -W byline : 패킷을 라인 단위로 출력한다.

### DNS 증폭 공격
* 악용하는 질의 방식으로 DNS Record 질의 타입을 ANY로 지정하면 요청한 도메인에 대한 모든 레코드 타입의 응답이 반환되기 때문에 응답이 증폭되는 효과가 있다.
* tcpdump 패킷을 보면 ID+ 형태는 질의 ID* 형태는 응답을 의미한다.

### 멤캐시드 (Memcached)
* 오픈소스 메모리 캐싱 시스템(메모리를 사용해 캐시 서비스를 제공해주는 데몬)으로 11211/tcp 와 11211/udp 포트를 기본 포트로 사용한다.
* 별도의 인증과정 없이 접근을 허용해주기 때문에 공격자가 멤캐시드 서버 IP 주소의 기본 포트인 11211번 포트로 희생자의 IP 주소로 위조한 특정 명령(state, set/get 명령 등)의 UDP 패킷을 전송하면 멤캐시드 서버가 희생자 IP로 패킷보다 증폭된 패킷을 반사하게 된다.

### WSD (또는 WS-Discovery)
* 웹 서비스 디스커버리의 준말로 자동으로 장비를 검색해주는 기술이다.
* UDP 3702번 포트를 기반으로 한 멀티캐스트 통신을 사용한다.
* 윈도우 기반 기기들이 네트워크 프린터 등을 자동으로 찾아서 연결 설정을 완료하는데 사용되는 서비스로 내부 네트워크망에서 사용되지만, 인터넷망에 노출되면 디도스 공격으로 악용될 수 있다.
* **WSD 증폭/반사** 공격은 요청 시 악의적으로 XML 오류 응답 메시지를 반복적으로 유발하는 명령을 요청하고 위조된 피해자의 IP로 대규모의 증폭된 응답이 가게 만드는 공격기법이다.

### ARMS (Apple Remote Management Service)
* 애플 기기들의 원격제어 기능을 활성화할 때 사용되는 데스크톱 원격제어 프로토콜이다.
* TCP/UDP 3283번 포트를 사용한다.
* **ARMS 증폭/반사** 공격은 피해자 IP로 출발지 IP를 위조한 후 취약한 애플 MAC 컴퓨터를 대상으로 원격 접속 요청을 보내 증폭된 응답이 가게 만드는 공격기법이다.

### CoAP (Constrained Application Protocol)
* 불안정한 네트워크상의 저전력 IoT 기기들을 위한 일종의 애플리케이션 프로토콜로 주로 중국의 모바일 폰과 사물인터넷 장비들 사이에서 사용된다.
* uDP 5683번 포트를 사용한다.
* 피해자 IP로 스푸핑한 출발지 IP에서 외부 노출된 IoT 기기 및 모바일 장치들을 대상으로 변조된 Get Request를 보내 증폭된 응답이 가게 만드는 공격기법이다.

### WEP (Wired Equivalent Privacy)
* 랜덤하게 생성되는 24bit 초기벡터(IV)와 고정된 40Bit(WEP-40) 또는 104Bit(WEP-104)의 WEP 공유키를 조합하여 WEP 암호키를 생성한 후 RC4 암호 알고리즘을 기반으로 한 난수발생기에 입력하여 스트림 암호를 위한 키스트림을 생성한다.
* 평문의 무결성을 보장하기 위해 CRC-32 알고리즘을 이용하여 무결성 체크값(ICV)을 생성한 후 평문과 조합하여 키스트림과 XOR 연산을 수행, 암호문을 생성한다.
* 무선 AP와 무선 단말기 사이에 사전에 서로 동일하게 설정된 공유키를 이용하여 인증과 데이터 암호화 기능을 제공하지만, 해당 무선랜을 사용하는 모든 장비(무선 AP와 무선 단말기)가 하나의 고정된 공유키를 사용하기 때문에 외부에 노출될 가능성이 크며 이를 통해 많은 보안 문제가 발생할 수 있다.
*  암호 알고리즘 : RC4

### WPA
* WEP와 동일한 RC4 알고리즘을 기반으로 하며 48bit 확장된 IV를 사용하는 TKIP 암호화 방식을 사용한다.
* 암호 알고리즘 : RC4-TKIP

### WPA 2
* WPA와 키 관리의 유사성을 가지고 있지만 AES 기반의 128bit 대칭키를 사용하고 블록암호모드로 CCM 모드를 사용하는 CCMP 암호화 방식을 사용한다.
* EAP (Extensible Authentication Protocol) : 다양한 종류의 인증방식을 캡슐화해서 전송하는 역할을 하는 인증 프로토콜이다.
* 암호 알고리즘 : AES-CCMP

### SSID (Service Set Identifier)
* 무선랜을 구분하기 위한 32byte 이름으로 서로 다른 무선랜을 식별하기 위한 용도로 사용한다.
* 무선 장비에서 Wi-Fi를 활성화했을 때 나오는 무선랜 목록이 바로 SSID를 의미한다.
* 보안상의 목적으로 무선랜 접속을 제한하기 위해 와이파이 공유기에 설정하는 옵션으로 "SSID 브로드캐스트를 사용하지 않도록(disable)" 설정한다.

### NAT (Network Address Translation)
* 내부 네트워크에서 사용하는 사설IP(Private IP)와 인터넷에서 사용하는 공인 IP(Public IP) 간의 변환 기술을 말한다.
* 부족한 공인 IP를 절약할 수 있고, 외부에서 사설 IP를 사용하는 내부 호스트로 직접 접근이 불가능하므로 내부 네트워크(사설망)를 보호할 수 있는 보안상의 장점이 있다.
### 워 드라이빙
* 무선랜 해킹과 관련하여 해커가 무선 네트워크를 찾기 위해 무선 장치를 가지고 주위의 AP를 찾는 것
* 임의의 번호를 추출해 원하는 모뎀을 찾아냄으로써 컴퓨터에 대한 해킹을 시도하는 것이다.

### SSL / TLS
* 넷스케이프사가 처음으로 만들었으며 이 프로토콜은 신뢰할 수 있는 종단-대-종단의 안전한 서비스를 제공하기 위해 TCP를 이용하도록 설계하였으며, 인증 및 암호화 기능을 제공한다. 웹 브라우저와 웹서버 간에 서로 상대의 신원을 확인하는 기능이 있다.
* 443/tcp 포트를 사용한다.
* 인터펫기술표준화기구(IETF)에서 SSL을 기반으로 표준화한 TLS가 있으며, 무선환경에서는 WTLS가 사용된다.
* TLS 1.3 버전에서 강화된 보안과 빨라진 성능을 특징으로 하고 있다.
  * TLS 1.2 이하 버전에서는 최초 세션 연결 시 2-RTT를 거쳐야 했으나 TLS 1.3에서는 이과정을 1-RTT로 단축하여 성능 향상
  * 세션 재연결 시에도 TLS 1.2 이하 버전에서는 1-RTT을 거쳐야 했으나 TLS 1.3에서는 공유된 암호키를 로컬에 저장하여 바로 요청 메시지에 해당 키를 사용하는 방식의 0-RTT를 지원한다.
* SSL/TLS 취약성 이용한 공격
  * BEAST (Browser Exploit Against SSL?TLS) 공격 : 사용자 브라우저의 취약점을 이용하여 HTTPS 쿠키를 훔쳐서 HTTPS 세션을 가로챌 수 있는 공격
  * CRIME (Compression Ration Info-Mass Exploitation) 공격 : HTTPS의 압축에 따른 취약점을 이용하여 HTTPS 쿠키를 훔쳐서 HTTPS 세션을 가로챌 수 있는 공격
* Handshake 프로토콜 : 종단 간에 보안 파라미터를 협상하기 위한 프로토콜
  1. 협상 단계
  2. 서버 인증 및 키 교환
  3. 클라이언트 인증 및 키 교환
  4. 협상한 보안 파라미터를 적용하여 메시지 교환
* Change cipher spec 프로토콜 : 협상한 보안 파라미터를 이후부터 적용함을 알리기 위한 프로토콜
* Alert 프로토콜 : 통신 과정에서 발생하는 오류를 통보하기 위한 프로토콜
* Application Data 프로토콜 : 응용 계층의 데이터를 전달하기 위한 프로토콜
* Record 프로토콜 : 상위 계층 프로토콜 데이터의 전달 및 적용된 보안 파라미터를 이용하여 애플리케이션 데이터에 대한 단편화 및 재조합, 암호화 및 복호화, 압축 및 압축해제, 메시지 인증 코드(MAC) 생성 및 검증 등을 제공하는 프로토콜
  1. 단편화 : 애플리케이션 데이터를 일정 크기로 단편화한다.
  2. 압축 : 단편화된 데이터를 압축 알고리즘으로 압축한다.
  3. MAC : MAC 값을 계산하여 추가한다.
  4. 암호화 : 압축된 데이터와 MAC 값을 암호 알고리즘으로 암호화한 후 Record 헤더를 추가하여 전송한다.

### SSH (Secure Sheel)
* 인터넷에서 원격으로 호스트를 관리하는 안전한 암호통신 터미널 프로그램
* 한 컴퓨터에서 다른 컴퓨터로 파일을 옮김
* 안전하지 않은 채널 사이의 강력한 인증기능 제공
* rlogin, rsh, telnet, ftp와 같은 프로그램을 안전하게 대체
* 22번 포트를 사용한다.
